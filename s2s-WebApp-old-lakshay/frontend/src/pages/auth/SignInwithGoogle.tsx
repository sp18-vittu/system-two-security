import React, { useEffect } from 'react'
import { useForm } from 'react-hook-form'
import { useDispatch, useSelector } from 'react-redux'
import { ssoDomainAuth } from '../../redux/nodes/domain/action'

const SignInwithGoogle = () => {
  const {
    register,
    handleSubmit,
    formState: { errors },
  } = useForm()

  const dispatch = useDispatch()

  const domain = useSelector((state: any) => state.domainreducer)

  var url = domain?.domainDetail?.loginUrl

  const onSubmit = (data: any) => {
    let domain: any = data.email.trim()
    const user = {
      domainName: domain + '.systemtwosecurity.com',
    }
    dispatch(ssoDomainAuth(user) as any)
  }

  useEffect(() => {
    if (domain?.isAuthenticted) {
      domainOpen()
    }
  }, [domain])

  const domainOpen = () => {
    window.location.href = url
  }

  return (
    <section className='min-h-screen w-full flex items-stretch text-black '>
      <div
        className='lg:flex w-full  hidden bg-no-repeat bg-cover relative items-center'
        style={{ backgroundImage: 'url(wallpaper.webp' }}
      >
        <div className=' w-full flex items-center justify-center text-center md:px-16 px-0 z-0'>
          <div className='absolute lg:hidden z-10  bg-no-repeat bg-cover items-center '>
            <div className='absolute bg-black  inset-0 z-0'></div>
          </div>
          <div className='bg-white w-[594px] h-[397px] rounded-lg'>
            <div className='w-full  z-20'>
              <h1 className='ml-[10rem] mt-[60px] '>
                <svg
                  xmlns='http://www.w3.org/2000/svg'
                  width='252'
                  height='76'
                  viewBox='0 0 252 76'
                  fill='none'
                >
                  <path
                    d='M221.836 74.375H223.734C227.094 74.375 227.529 73.0033 228.478 70L233.784 50.75H230.732L226.855 65.125L222.423 50.75H219.114L225.045 68.4375H225.669C225.357 70.25 225.419 71.625 223.564 71.7789H221.836V74.375Z'
                    fill='#1F4C7C'
                  />
                  <path
                    d='M204.994 64.2009V53.375H201.635V50.75H204.994V46.4375H208.002V50.75H213.121V53.375H208.002V63.8125C208.002 65.2039 208.236 65.7789 209.625 65.762H213.121V68.375H208.627C207.503 68.375 206.705 67.985 205.942 67.1875C205.18 66.39 204.994 65.4056 204.994 64.2009Z'
                    fill='#1F4C7C'
                  />
                  <path
                    d='M189.961 46.8749H186.653V43.7119L189.961 43.7119V46.8749Z'
                    fill='#1F4C7C'
                  />
                  <path
                    d='M189.961 50.7499V65.6874H195.08V68.4374H186.653V53.4374H181.596V50.7499H189.961Z'
                    fill='#1F4C7C'
                  />
                  <path
                    d='M169.798 51C169.486 51.1543 169.423 51.1875 169.111 51.4242L168.645 51.6875V50.75H163.181V53.3125H165.803V65.6875H163.243V68.375H172.607V65.6875H168.832V56.5315C168.832 54.6311 170.052 53.6875 171.95 53.6875H175.068V50.6606H172.306H172.306C171.34 50.6606 170.485 50.6606 169.798 51Z'
                    fill='#1F4C7C'
                  />
                  <path
                    d='M143.829 64.5573V51H147.137V64.0312C147.45 65.4375 147.998 65.625 149.222 65.75H150.252C152.15 65.75 153.37 64.8966 153.37 62.9962V51H156.15V68.375H153.54C153.54 67.4749 153.54 65.5841 153.54 67.5C153.336 67.7715 152.818 68.0625 152.444 68.25C151.507 68.5625 150.85 68.5625 149.884 68.5625H147.998C146.795 68.5625 145.812 68.3241 145.015 67.5266C144.219 66.7461 143.829 65.762 143.829 64.5573Z'
                    fill='#1F4C7C'
                  />
                  <path
                    d='M125.975 64.2009V55.1741C125.975 53.9694 126.365 52.9852 127.144 52.1877C127.907 51.3903 128.907 51 130.127 51H136.55V53.613H135.686H130.822C129.432 53.613 128.738 54.3087 128.738 55.6831V63.6919C128.738 65.0833 129.432 65.7789 130.822 65.762H136.55V68.375H130.127C128.89 68.375 127.89 67.9847 127.128 67.1873C126.365 66.3898 125.975 65.4056 125.975 64.2009Z'
                    fill='#1F4C7C'
                  />
                  <path
                    d='M108.753 55.3438V58.1971H115.327V55.3438C115.327 53.9524 114.882 53.2567 113.492 53.2567H110.713C109.323 53.2567 108.753 53.9524 108.753 55.3438ZM105.866 64.2009V54.8177C105.866 53.613 106.256 52.6289 107.035 51.8314C107.798 51.0509 108.798 50.6606 110.018 50.6606H114.187C115.424 50.6606 116.424 51.0509 117.204 51.8314C117.967 52.6289 118.356 53.613 118.356 54.8177V60.7932H108.753V63.6919C108.753 64.5625 109.323 65.7789 110.713 65.762H117.661V68.375H110.018C108.781 68.375 107.781 67.9847 107.018 67.1873C106.256 66.3898 105.866 65.4056 105.866 64.2009Z'
                    fill='#1F4C7C'
                  />
                  <path
                    d='M94.4953 68.3318H87.0214V65.5491H92.7299C93.6643 65.5491 94.4846 65.7362 95.1325 65.063C95.6417 64.534 95.6986 63.4422 95.6986 62.708V58.625C95.6986 57.6875 95.0743 57.125 94.2628 57.125C91.941 57.0835 89.2988 56.9698 88.008 55.0395C87.3837 54.106 87.0214 52.9354 87.0214 51.6525V48.8698C87.0214 47.3936 87.4621 46.2058 88.3433 45.3235C89.2246 44.4412 90.4548 43.8125 91.8854 43.5625H98.4453V46.5H92.4108C91.0791 46.5 90.0803 47.625 90.0803 48.8698V51.6525C90.1427 53.25 91.2664 54.1592 91.9531 54.1592L95.4489 54.3125C98.0083 54.625 98.9447 57.1875 98.9447 59.9836V63.462C98.8199 65 98.4981 65.9927 97.6338 66.875C96.7525 67.7573 95.9698 68.3318 94.4953 68.3318Z'
                    fill='#1F4C7C'
                  />
                  <path
                    d='M243.96 26.1139H247.136C248.526 26.1139 249.221 25.4182 249.221 24.0269V15.6831C249.221 14.2917 248.526 13.5961 247.136 13.5961H243.96C242.57 13.5961 241.875 14.2917 241.875 15.6831V24.0269C241.875 25.4182 242.57 26.1139 243.96 26.1139ZM239.113 24.5529L239.113 15.1571C239.113 13.9524 239.502 12.9683 240.282 12.1708C241.045 11.3903 242.045 11 243.265 11L247.831 11C249.034 11 250.017 11.3903 250.814 12.1708C251.61 12.9683 252 13.9524 252 15.1571V24.5529C252 25.7576 251.61 26.7417 250.831 27.5222C250.034 28.3197 249.034 28.71 247.831 28.71H243.265C242.028 28.71 241.028 28.3197 240.265 27.5222C239.502 26.7417 239.113 25.7576 239.113 24.5529Z'
                    fill='#EE7103'
                  />
                  <path
                    d='M224.795 28.375H221.362L218.24 11H221.174L223.234 24.3706L225.482 14.0625H227.847L229.914 24.3706L231.849 11H234.846L231.724 28.375H228.291L226.605 20.3125L224.795 28.375Z'
                    fill='#EE7103'
                  />
                  <path
                    d='M208.805 28.375H205.856V6.625H200.387V3.84229H214.495V6.625H208.805V28.375Z'
                    fill='#EE7103'
                  />
                  <path
                    d='M183.157 28.375H180.41V10.965H183.016V11.75C183.157 11.625 183.219 11.5626 183.469 11.3751C183.719 11.2151 184.093 11.0001 185.132 10.965H186.309C187.78 10.965 188.484 11.525 188.714 12.12L188.838 12.3126C188.963 12.1876 189.025 12.1876 189.4 11.8126C189.649 11.5626 189.559 11.5941 189.738 11.3901C190.083 10.999 190.71 10.625 191.414 10.625H193.244C194.152 10.625 194.894 11.016 195.496 11.7981C196.097 12.5972 196.18 13.5833 196.18 14.7905V28.375H193.52V15.3175C193.52 13.9234 192.759 13.3126 191.709 13.3126C190.66 13.3126 189.738 13.9234 189.738 15.3175V28.375H186.978V15.3175C186.978 13.9234 186.266 13.2501 185.217 13.2501C183.784 13.2501 183.157 14.4504 183.157 16.3546V28.375Z'
                    fill='#1F4C7C'
                  />
                  <path
                    d='M165.99 15.6206V18.375H172.569V15.6206C172.569 14.2292 171.874 13.5336 170.485 13.5336H168.075C166.685 13.5336 165.99 14.2292 165.99 15.6206ZM163.056 23.875V15.0946C163.056 13.8899 163.446 12.9058 164.225 12.1083C164.988 11.3278 165.988 10.9375 167.208 10.9375H171.377C172.614 10.9375 173.614 11.3278 174.394 12.1083C175.157 12.9058 175.416 13.8899 175.416 15.0946V21.125H165.99V23.1875C165.99 24.8125 166.489 25.9375 168.425 25.9375H174.355V28.625H167.675C166.438 28.625 165.13 28.11 164.367 27.3125C163.604 26.515 163.056 25.0797 163.056 23.875Z'
                    fill='#1F4C7C'
                  />
                  <path
                    d='M147.812 24.2634V13.4375H144.453V10.8125H147.812V6.5H150.82V10.8125H155.939V13.4375H150.82V23.875C150.82 25.2664 151.054 25.8414 152.444 25.8245H155.939V28.4375H151.445C150.321 28.4375 149.523 28.0475 148.76 27.25C147.998 26.4525 147.812 25.4681 147.812 24.2634Z'
                    fill='#1F4C7C'
                  />
                  <path
                    d='M107.347 34.625H109.245C112.605 34.625 113.04 33.2533 113.989 30.25L119.296 11H116.243L112.366 25.375L107.934 11H104.625L110.556 28.6875H111.18C110.868 30.5 110.93 31.875 109.076 32.0289H107.347V34.625Z'
                    fill='#1F4C7C'
                  />
                  <path
                    d='M94.3705 28.5193H86.8966V25.7366H92.6051C93.5394 25.7366 94.3597 25.9237 95.0077 25.2505C95.5169 24.7215 95.5737 23.6297 95.5737 22.8955V18.8125C95.5737 17.875 94.9495 17.3125 94.138 17.3125C91.8162 17.271 89.174 17.1573 87.8831 15.227C87.2589 14.2935 86.8966 13.1229 86.8966 11.84V9.05725C86.8966 7.58105 87.3372 6.39331 88.2185 5.51099C89.0998 4.62866 90.33 4 91.7605 3.75H98.3205V6.6875H92.2859C90.9542 6.6875 89.9554 7.8125 89.9554 9.05725V11.84C90.0179 13.4375 91.1415 14.3467 91.8282 14.3467L95.324 14.5C97.8835 14.8125 98.8199 17.375 98.8199 20.1711V23.6495C98.695 25.1875 98.3733 26.1802 97.5089 27.0625C96.6277 27.9448 95.8449 28.5193 94.3705 28.5193Z'
                    fill='#1F4C7C'
                  />
                  <path
                    d='M132.549 28.625H125.975L125.975 26H131.321C131.928 26 132.445 26.0705 132.963 25.7525C133.574 25.3766 133.607 24.3864 133.607 23.6686V22.0625C133.607 21.3954 133.058 20.9375 132.344 20.9375C130.3 20.9375 128.011 20.9085 126.715 19.3281C126.104 18.583 125.725 17.6708 125.725 16.7566V14.7765C125.725 13.7261 126.261 12.6903 127.036 12.0625C127.811 11.4347 128.337 11.1779 129.596 11H135.776V13.625H130.715C129.544 13.625 129.096 13.875 128.784 14.7765V16.7566C128.839 17.8933 129.709 18.0784 130.313 18.0784L133.388 18.1875C135.639 18.4099 136.463 20.6951 136.463 22.6847V25.1598C136.353 26.2542 136.07 26.9606 135.31 27.5884C134.534 28.2162 133.846 28.625 132.549 28.625Z'
                    fill='#1F4C7C'
                  />
                  <path
                    fill-rule='evenodd'
                    clip-rule='evenodd'
                    d='M0 11.75C0 5.53679 5.03081 0.5 11.2366 0.5H63.6742C69.88 0.5 74.9108 5.5368 74.9108 11.75V64.25C74.9108 70.4632 69.88 75.5 63.6742 75.5H11.2366C5.03081 75.5 0 70.4632 0 64.25V11.75ZM21.7241 11.25V14.0625L12.61 18.125L21.7241 22.375V25.9375L10.113 31.3125V28.375L19.6641 24.3125L10.113 20.125V16.75L21.7241 11.25ZM25.9067 32.3125V29.875H41.3882V32.3125H25.9067Z'
                    fill='#1F4C7C'
                  />
                  <path
                    d='M21.7241 11.25V14.0625L12.61 18.125L21.7241 22.375V25.9375L10.113 31.3125V28.375L19.6641 24.3125L10.113 20.125V16.75L21.7241 11.25Z'
                    fill='white'
                  />
                  <path d='M25.9067 29.875V32.3125H41.3882V29.875H25.9067Z' fill='white' />
                </svg>
              </h1>
              <div></div>
              <form
                action=''
                className='sm:w-2/3 w-full px-4 lg:px-0 mx-auto'
                onSubmit={handleSubmit(onSubmit)}
                noValidate
              >
                <div className='pb-2 pt-6'>
                  <label className='block text-sm text-[#344054] font-bold text-left'>Domain</label>

                  <div className='relative mb-4 flex flex-wrap items-stretch'>
                    <input
                      type='text'
                      className={`relative m-0 block w-[1px] min-w-0 flex-auto rounded-l border border-solid border-gray-400 bg-clip-padding px-3 py-[0.25rem] text-sm font-normal  text-neutral-700 outline-none ${
                        errors.email
                          ? 'border-2 border-red-400 focus:ring-red-100'
                          : 'focus:border-blue-400 focus:ring-blue-600'
                      }`}
                      placeholder='Enter your company domain'
                      style={{ borderRight: 'none' }}
                      {...register('email', {
                        required: 'Domain name is required .',
                      })}
                    />
                    <span
                      className={`flex items-center whitespace-nowrap rounded-r  border border-solid border-gray-400 px-3 py-[0.25rem] text-center text-sm font-normal leading-[1.6] text-black ${
                        errors.email
                          ? 'border-2 border-red-400 focus:ring-red-100'
                          : 'focus:border-blue-400 focus:ring-blue-600'
                      }`}
                      id='basic-addon2'
                      style={{ borderLeft: 'none' }}
                    >
                      .systemtwosecurity.com
                    </span>
                  </div>
                  {errors.email && (
                    <p className='text-xs text-left text-[#FF0000]'>
                      {errors.email.message as any}
                    </p>
                  )}
                </div>

                <div className=' pb-2'>
                  <button
                    className='bg-[#EE7103] block w-full  py-2 mt-4 Text md/Semibold leading-5 text-center text-white transition-colors duration-150 border border-transparent rounded-lg focus:outline-none focus:shadow-outline-blue'
                    type='submit'
                  >
                    Continue
                  </button>
                </div>
                <p className='flex cursor-pointer items-center justify-center mt-5  text-[#EE7103]'>
                  <b> I don't know the company domain.</b>
                </p>
              </form>
            </div>
          </div>
        </div>
      </div>
    </section>
  )
}

export default SignInwithGoogle
